# Trading 101 (для дизайнеров, аналитиков, PM/QA)

Автор: Vladimir Saraikin

Цель: чтобы человек **понимал язык трейдинга**, мог читать требования, рисовать дизайны и не теряться на терминах.

## Что такое рынок и зачем вообще «трейдинг»

Трейдинг — это обмен активов на рынке (бирже/площадке) по правилам. Зачем это делают:

- **Хеджирование** — снизить риск (например, компания фиксирует цену топлива заранее).
- **Спекуляция** — заработать на движении цены.
- **Арбитраж** — заработать на разнице цен/условий на разных рынках.
- **Маркет-мейкинг** — обеспечивать ликвидность (ставить котировки), зарабатывать на спреде и/или комиссиях.

> Важное: инвестиции ≠ трейдинг. Инвестиции обычно про долгий горизонт и фундаментальные причины, трейдинг — чаще про микро/среднесрочную динамику и риск-менеджмент.

## Asset classes — классы активов (что вообще можно торговать)

Короткий словарь:

- **Equities** — акции.
- **FX** — валюты (EUR/USD и т.п.).
- **Fixed Income** — облигации.
- **Commodities** — сырьё (нефть, золото).
- **Crypto** — цифровые активы (BTC, ETH).
- **Derivatives** — производные (futures, options, swaps).

Также почти всегда различают:

- **Spot** — покупка/продажа «сейчас» (обмен активов).
- **Derivatives** — контракт на цену (часто с плечом, маржой, ликвидациями).

## Биржа и участники (в очень упрощённом виде)

- **Биржа / venue** — место, где встречаются заявки на покупку и продажу.
- **Matching engine** — компонент биржи, который сопоставляет заявки (bids/asks) и формирует сделки.
- **Участники**:
  - retail/pro трейдеры
  - маркет-мейкеры
  - алго/квант стратегии
  - риск/бэкофис (внутри компаний)
  - brokers (посредники между клиентом и биржей)

## Order book (книга заявок) — сердце order-book рынков

### Что такое order book

**Order book** — это две очереди заявок:

- **Bids** — заявки на покупку.
- **Asks** — заявки на продажу.

Каждая заявка обычно имеет: **price** (цена), **qty/size** (объём), иногда **time-in-force** и дополнительные поля.

- **Best bid / best ask** — это лучшие цены покупки и продажи, которые находятся в верхней части книги заявок.
- **Spread** — это разница между лучшей ценой продажи (best ask) и лучшей ценой покупки (best bid).
- **Mid price** — это середина спреда, часто используемая как «справедливая» цена.
- **Depth** — количество объёма, доступного в книге заявок на разных уровнях цены.
- **Liquidity** — насколько легко можно исполнить объём без значительного изменения цены.

## Ордера: какие бывают и чем отличаются

### Базовые типы

- **Market order** — ордер, который исполняется сразу по лучшим доступным ценам, что часто приводит к *slippage*.
- **Limit order** — ордер, который исполняется по цене не хуже заданной; может встать в книгу заявок и ждать исполнения.
- **Stop / stop-limit** — ордер, который активируется при достижении определённого триггера, важен для управления рисками и автоматизации.

### Time-in-force (как долго ордер живёт)

Time-in-Force (TIF) — это условие, определяющее, как долго ордер остаётся активным на рынке.

- **GTC (Good-Til-Canceled)** — ордер живёт, пока не будет отменён вручную.
- **IOC (Immediate-Or-Cancel)** — ордер должен быть исполнен немедленно полностью или частично, остаток отменяется.
- **FOK (Fill-Or-Kill)** — ордер должен быть исполнен полностью сразу, иначе он отменяется.
- **Day** — ордер действует только в течение текущего торгового дня и автоматически отменяется по его окончании.
- **GTX / Post-only** — ордера, которые размещаются в книге заявок только если они не исполняются сразу (используются для добавления ликвидности и избежания снятия ликвидности).

## Execution — что реально происходит после нажатия “Buy/Sell”

### Жизненный цикл ордера (упрощённо)

1. Клиент/пользователь отправил ордер.
2. Система приняла и проверила ордер (лимиты, параметры, риск‑чеки).
3. Ордер ушёл на биржу или на внутренний matching/интернализацию.
4. Ордер получил статусы и события (ack / reject / fills).

Типовые статусы (общая идея):

- **New / Accepted (Ack)** — биржа/система приняла ордер.
- **Rejected** — отказ (параметры, лимиты, недостаток средств, рынок закрыт и т.п.).
- **Partially filled** — ордер исполнен частично.
- **Filled** — ордер исполнен полностью.
- **Canceled / Expired** — ордер отменён или истёк.

### Order vs Trade vs Fill (самая частая путаница)

- **Order** — намерение купить или продать.
- **Fill** — факт исполнения части ордера (их может быть несколько).
- **Trade** — сделка на рынке, часто соответствует fill’ам, но в системах может иметь несколько представлений.

### Slippage (почему цена «не такая, как ожидали»)

**Slippage** — разница между ожидаемой ценой и фактической средней ценой исполнения. Причины:

- недостаточная ликвидность (мало объёма на верхних уровнях)
- скорость движения рынка
- задержки (latency)

## Market data — данные рынка (поток, а не таблица)

Типы market data, которые встречаются в продукте:

- **Order book updates** — изменения уровней bids/asks.
- **Trades tape** — лента сделок (цена/объём/время).
- **Ticker** — агрегатные поля (last price, 24h volume, change и т.п.).
- **OHLCV / candles** — свечи (Open/High/Low/Close/Volume) за интервал.

Частые проблемы, которые важны для UI/аналитики:

- данные приходят **пакетами** и **асинхронно**
- возможны **gaps** (пропуски), **out-of-order** (пришло не по порядку)
- разные источники данных могут расходиться

## Комиссии (fees) — почему это часть продукта

- **Maker** — добавляет ликвидность (обычно лимитный ордер, который стал в книгу).
- **Taker** — забирает ликвидность (обычно market или агрессивный limit, который сразу исполнился).

Комиссии часто различаются для maker/taker и влияют на PnL и UX.

## Продвинутые темы: деривативы, риск, ledger, PnL, execution

### Derivatives / маржа / плечо (расширенное объяснение)

- **Futures (фьючерсы)** — стандартизированные контракты на покупку или продажу актива в будущем по заранее оговорённой цене. Используются для хеджирования и спекуляций, имеют дату экспирации.
- **Perpetual futures (perps)** — разновидность фьючерсов без даты экспирации. Для поддержания цены контракта близкой к спотовой используется механизм **funding rate** — периодические платежи между лонгами и шортами.
- **Options (опционы)** — контракты, дающие право (но не обязанность) купить (call) или продать (put) актив по определённой цене (strike) до или на дату экспирации (expiry). Используются для хеджирования и стратегий с ограниченным риском.
- **Swaps** — договоры об обмене финансовыми потоками, например, процентными ставками или валютами; используются для управления рисками.
- **Linear vs inverse contracts** — линейные контракты номинированы и расчёт ведётся в базовой валюте (например, USDT), а инверсные — в базовом активе (например, BTC), что влияет на риск и расчёты.

- **Leverage (плечо)** — возможность торговать объёмом больше депозита.
- **Margin (маржа)** — обеспечение под позицию.
- **Liquidation (ликвидация)** — принудительное закрытие позиции при нехватке маржи.

### Position & PnL (как измеряют результат)

- **Position** — текущая позиция по инструменту (long/short, размер).
- **Entry price** — средняя цена входа.
- **Unrealized PnL** — «бумажная» прибыль/убыток (если закрыть по текущей цене).
- **Realized PnL** — зафиксированная прибыль/убыток (после закрытия/частичного закрытия).

### Ledger — бухгалтерия и источник истины

**Ledger (главная книга)** — система учёта, где каждая операция отражается как записи, чтобы можно было:

- восстановить баланс на любой момент
- провести аудит
- доказать, откуда взялась цифра в балансе/PnL

Что обычно является событиями в ledger:

- deposit / withdrawal
- trade / fill
- fee
- funding (для деривативов)
- internal transfers

Важный принцип: **баланс — это следствие ledger, а не наоборот**.